runtime: nodejs20

# Backend-specific configuration for monorepo  
runCommand: "cd packages/backend && node dist/index.cjs.js"

runConfig:
  minInstances: 0
  maxInstances: 10
  concurrency: 100
  cpu: 1
  memoryMiB: 1024

env:
  - variable: NODE_ENV
    value: staging
  - variable: BACKEND_SECRET
    secret: BACKEND_SECRET
  - variable: GOOGLE_CLIENT_ID
    secret: GOOGLE_CLIENT_ID  
  - variable: GOOGLE_CLIENT_SECRET
    secret: GOOGLE_CLIENT_SECRET
  - variable: GITHUB_TOKEN
    secret: GITHUB_TOKEN
  - variable: POSTGRES_HOST
    secret: POSTGRES_HOST
  - variable: POSTGRES_PORT
    value: "5432"
  - variable: POSTGRES_USER
    secret: POSTGRES_USER
  - variable: POSTGRES_PASSWORD
    secret: POSTGRES_PASSWORD
  - variable: POSTGRES_DB
    secret: POSTGRES_DB